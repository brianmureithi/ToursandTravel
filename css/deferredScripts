function addGAAttribute(n){ga(function(t){var i=new window.gaplugins.Linker(t);$(n).each(function(){var n=$(this).attr("href"),t=i.decorate(n);$(this).attr("href",t)})})}var SSOTA_App={},scrollme;(function(){"use strict";var t={},n={};return SSOTA_App.init=function(){if(typeof initializeTASso!="undefined"){console.log("initialised SSOTA");$(document).on("ready",SSOTA_App.ready())}else console.log("SSOTA not initialised: This is probably because SSOTA plugins JS is missing")},SSOTA_App.ready=function(){initializeTASso({initiator:"Trafalgar"}).then(function(){SSOTA_App.taHelper=new SsoTAHelper({initiator:taConfig.initiator});t=new SsoTARegistration({emailConfirmationReturnUrl:taConfig.emailConfirmationReturnUrl,forgotUsernameReturnUrl:encodeURIComponent(taConfig.forgotUsernameReturnUrl),searchTextWatermark:"IATA/ABTA/CLIA code",searchButtonText:"Find Agency",searchTextInstructions:"&nbsp;",agentsFoundMessage:"We found the following agents:",container:"#SSOTA_RegisterForm",success:function(){},fail:function(){}},{"goto-login":function(){n.clear();$(".SSOTA_Register").removeClass("contentVisible");$(".SSOTA_Login").addClass("contentVisible");$("html").scrollTop($(".SSOTA_LoginAndRegister").offset().top)},"goto-forgot-username":function(){n.gotoForgotUsernamePage()},"goto-forgot-password":function(){n.gotoForgotPasswordPage()},register:function(){taConfig.currentCountry!==""&&$("#sso-ta-search-phone-number-container .sso-ta-country-options span").filter(function(){return $(this).text().indexOf(taConfig.currentCountry)===0}).click()}});n=new SsoTALogin({container:"#SSOTA_loginForm",usernameValidationMessage:"Some text",passwordResetReturnUrl:encodeURIComponent(taConfig.passwordResetReturnUrl),forgotUsernameReturnUrl:encodeURIComponent(taConfig.forgotUsernameReturnUrl),success:function(n){SSOTA_App.taHelper.isLoggedIn(function(t){t===!0&&SSOTA_App.processLogin(n,function(n){window.location=n.location})})},fail:function(){}});$("#logoutButton").click(function(){SSOTA_App.processLogout(function(){console.log("Server logout finised");SSOTA_App.taHelper.logout();window.location=""})})});SSOTA_App.processLogin=function(n,t){console.log("processLogin data: ",n);typeof n.TravelAgentInfo=="string"&&(n.TravelAgentInfo=JSON.parse(n.TravelAgentInfo));$.ajax({url:"/api/sitecore/singlesignontravelagent/loginuser",async:!0,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(n),success:function(n){t(n)}})};SSOTA_App.processLogout=function(n){$.ajax({url:"/api/sitecore/singlesignontravelagent/logoutuser",async:!0,type:"POST",contentType:"application/json",dataType:"json",success:function(t){n&&typeof n=="function"?n():(SSOTA_App.taHelper.logout(),window.location=t.location)}})};$("#sso-ta-register-agency").length>0&&SSOTA_App.registerAgency();$("#SSOTA_RegisterAgency").click(function(){if(taConfig.currentCountry!==""){$("#SSOTA_RegisterAgencyForm .sso-ta-country-options span").filter(function(){return $(this).text().indexOf(taConfig.currentCountry)===0}).click();$(".country-section .selectric-items li").filter(function(){return $(this).text().indexOf(taConfig.currentCountry)===0}).click();var n="+"+$("#SSOTA_RegisterAgencyForm .sso-ta-country-options span").filter(function(){return $(this).text().indexOf(taConfig.currentCountry)===0}).parent().find("div").data("country");setTimeout(function(){$("#SSOTA_sgencyPhoneCountry").val(n)},1e3)}})},SSOTA_App.events=function(){$("body").on("focusin","#SSOTA_App form input",function(){$(this).parent().addClass("focused")});$("body").on("focusout","#SSOTA_App form input",function(){var n=$(this);n.val().length<1&&n.parent().removeClass("focused")});$("body").on("click","#SSOTA_App form label",function(){$(this).parents("div").hasClass("focused")||$(this).siblings("input").focus()});$("body").on("click","#sso-ta-button-register-new-agent, .sso-ta-agent-name-link",function(){var n=setInterval(function(){if($("#sso-ta-details-form").length>0){$("#sso-ta-select-title").selectric();var t=$("#sso-ta-details-form input[readonly], .selectric-disabled");t.each(function(){$(this).parents("div").addClass("SSOTA_readOnlyInput")});clearInterval(n)}},250)});$("body").on("click",".back-btn",function(){$("html,body").animate({scrollTop:$(".SSOTA_Register").offset().top},500)});setTimeout(function(){var n=$("#SSOTA_App").find("label");n.each(function(){$(this).text().indexOf(":")>-1&&$(this).text($(this).text().replace(":"," "))})},1e3);$(".SSOTA_sectionToggleButton").click(function(){var n=$(this).parents(".SSOTA_bigButton");n.hasClass("contentVisible")?$(".SSOTA_bigButton").removeClass("contentVisible"):($(".SSOTA_bigButton").removeClass("contentVisible"),n.addClass("contentVisible"));n.hasClass("SSOTA_Register")&&$("#sso-ta-main-div").empty()});$(".SSOTA_changeViewButton").click(function(){window.location.hash=$(this).data("ssota-view-hash")});"onhashchange"in window&&(window.onhashchange=function(){SSOTA_App.setView()});$(".SSOTA_LoginAndRegister_SearchHelpText").find(".help-toggle").click(function(n){n.preventDefault();$(".SSOTA_LoginAndRegister_SearchHelpTextInner").slideToggle();$(".help-toggle").toggleClass("open")});$("#sso-ta-toggle-search-container > label").each(function(n,t){$(t).wrapInner("<span><\/span>")});$("#registerAgency_phoneDropdown li").click(function(){var n=$(this).clone(),t="+"+$(n).find(".sso-ta-flag-box").data("country");n.find("span").html(t);$(".sso-ta-country-dropdown #countryCodeContainer").html(n.html());$("#SSOTA_sgencyPhoneCountry").val(t)});SSOTA_App.setView()},SSOTA_App.setView=function(){var n=window.location.hash.substring(1),t=$("#SSOTA_App").find("[data-ssota-view='"+n+"']");$("html,body").animate({scrollTop:$("#SSOTA_App").scrollTop()},500);n===null||n===undefined||n===""?window.location.hash="SSOTA_LoginAndRegister":($(".SSOTA_view").removeClass("SSOTA_activeView"),setTimeout(function(){$(".SSOTA_view").hide();t.show().addClass("SSOTA_activeView")},400));setTimeout(function(){SSOTA_App.resetState()},500)},SSOTA_App.resetState=function(){$("#SSOTA_App form").trigger("reset");$(".SSOTA_bigButton").removeClass("contentVisible");$(".help-toggle").removeClass("open");$("#SSOTA_App form div").removeClass("focused");$("#sso-ta-main-div").empty()},SSOTA_App.registerAgency=function(){var n={};$("#sso-ta-register-agency").validate({errorElement:"span",errorClass:"sso-ta-validation-error",messages:{SSOTA_agencyName:"Please enter the Agency Name",SSOTA_addressLine1:"Please enter the Address",SSOTA_cityTown:"Please enter the City or Town",SSOTA_postcode:"Please enter the City or Town",SSOTA_email:"Please enter an email address",SSOTA_sgencyPhoneCountry:"Required",SSOTA_sgencyPhoneArea:"Required",SSOTA_sgencyPhoneBase:"Required"},submitHandler:function(){$("#sso-ta-register-agency").each(function(){var t=$(this).find("input"),i=$(this).find("select");t.each(function(){var t=$(this);n[t.attr("data-model")]=t.val()});i.each(function(){var t=$(this);console.log(t.val());console.log(t.attr("data-model"));n[t.attr("data-model")]=t.val()})});$.ajax({url:"/api/sitecore/agentregistration/registeragencyjs",async:!0,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(n),success:function(){},complete:function(){window.location.hash="SSOTA_RegisterAgencyComplete"}})}})},SSOTA_App.init()})();var isPageEditor1=function(){return typeof Sitecore=="undefined"?!1:!!(Sitecore&&Sitecore.PageModes&&Sitecore.PageModes.PageEditor)},EasyAutocomplete=function(n){return n.Configuration=function(n){function r(){var i,r;if("xml"===n.dataType&&(n.getValue||(n.getValue=function(n){return $(n).text()}),n.list||(n.list={}),n.list.sort||(n.list.sort={}),n.list.sort.method=function(t,i){return t=n.getValue(t),i=n.getValue(i),i>t?-1:t>i?1:0},n.list.match||(n.list.match={}),n.list.match.method=function(n,t){return n.search(t)>-1}),void 0!==n.categories&&n.categories instanceof Array){for(var f=[],u=0,e=n.categories.length;e>u;u+=1){i=n.categories[u];for(r in t.categories[0])void 0===i[r]&&(i[r]=t.categories[0][r]);f.push(i)}n.categories=f}}function u(){function i(n,t){var u=n||{},r;for(r in n)void 0!==t[r]&&null!==t[r]&&("object"!=typeof t[r]||t[r]instanceof Array?u[r]=t[r]:i(n[r],t[r]));return void 0!==t.data&&null!==t.data&&"object"==typeof t.data&&(u.data=t.data),u}t=i(t,n)}function f(){var i,r,u;"list-required"!==t.url&&"function"!=typeof t.url&&(i=t.url,t.url=function(){return i});void 0!==t.ajaxSettings.url&&"function"!=typeof t.ajaxSettings.url&&(i=t.ajaxSettings.url,t.ajaxSettings.url=function(){return i});"string"==typeof t.listLocation&&(r=t.listLocation,t.listLocation="XML"===t.dataType.toUpperCase()?function(n){return $(n).find(r)}:function(n){return n[r]});"string"==typeof t.getValue&&(u=t.getValue,t.getValue=function(n){return n[u]});void 0!==n.categories&&(t.categoriesAssigned=!0)}function e(){t.ajaxSettings=void 0!==n.ajaxSettings&&"object"==typeof n.ajaxSettings?n.ajaxSettings:{}}function o(n){return void 0!==t[n]&&null!==t[n]}function i(n,i){function r(t,i){for(var u in i)void 0===t[u]&&n.log("Property '"+u+"' does not exist in EasyAutocomplete options API."),"object"==typeof t[u]&&-1===$.inArray(u,s)&&r(t[u],i[u])}r(t,i)}var t={data:"list-required",url:"list-required",dataType:"json",listLocation:function(n){return n},xmlElementName:"",getValue:function(n){return n},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(n,i){return n=t.getValue(n),i=t.getValue(i),i>n?-1:n>i?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(n,t){return n.search(t)>-1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(n){return n},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},s=["ajaxSettings","template"];this.get=function(n){return t[n]};this.equals=function(n,i){return!(!o(n)||t[n]!==i)};this.checkDataUrlProperties=function(){return"list-required"!==t.url||"list-required"!==t.data};this.checkRequiredProperties=function(){for(var n in t)if("required"===t[n])return logger.error("Option "+n+" must be defined"),!1;return!0};this.printPropertiesThatDoesntExist=function(n,t){i(n,t)};r();u();t.loggerEnabled===!0&&i(console,n);e();f()},n}(EasyAutocomplete||{}),EasyAutocomplete=function(n){return n.Logger=function(){this.error=function(n){console.log("ERROR: "+n)};this.warning=function(n){console.log("WARNING: "+n)}},n}(EasyAutocomplete||{}),EasyAutocomplete=function(n){return n.Constans=function(){var n={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(t){return n[t]}},n}(EasyAutocomplete||{}),EasyAutocomplete=function(n){return n.ListBuilderService=function(n,t){function i(t,i){function f(){var r,u={};return void 0!==t.xmlElementName&&(u.xmlElementName=t.xmlElementName),void 0!==t.listLocation?r=t.listLocation:void 0!==n.get("listLocation")&&(r=n.get("listLocation")),void 0!==r?"string"==typeof r?u.data=$(i).find(r):"function"==typeof r&&(u.data=r(i)):u.data=i,u}function e(){var n={};return void 0!==t.listLocation?"string"==typeof t.listLocation?n.data=i[t.listLocation]:"function"==typeof t.listLocation&&(n.data=t.listLocation(i)):n.data=i,n}var r={},u;return(r="XML"===n.get("dataType").toUpperCase()?f():e(),void 0!==t.header&&(r.header=t.header),void 0!==t.maxNumberOfElements&&(r.maxNumberOfElements=t.maxNumberOfElements),void 0!==n.get("list").maxNumberOfElements&&(r.maxListSize=n.get("list").maxNumberOfElements),void 0!==t.getValue)?"string"==typeof t.getValue?(u=t.getValue,r.getValue=function(n){return n[u]}):"function"==typeof t.getValue&&(r.getValue=t.getValue):r.getValue=n.get("getValue"),r}function r(t){var i=[];return void 0===t.xmlElementName&&(t.xmlElementName=n.get("xmlElementName")),$(t.data).find(t.xmlElementName).each(function(){i.push(this)}),i}this.init=function(t){var r=[],i={};return i.data=n.get("listLocation")(t),i.getValue=n.get("getValue"),i.maxListSize=n.get("list").maxNumberOfElements,r.push(i),r};this.updateCategories=function(t,r){var u,f;if(n.get("categoriesAssigned"))for(t=[],u=0;u<n.get("categories").length;u+=1)f=i(n.get("categories")[u],r),t.push(f);return t};this.convertXml=function(t){if("XML"===n.get("dataType").toUpperCase())for(var i=0;i<t.length;i+=1)t[i].data=r(t[i]);return t};this.processData=function(i,r){for(var u=0,f=i.length;f>u;u+=1)i[u].data=t(n,i[u],r);return i};this.checkIfDataExists=function(n){for(var t=0,i=n.length;i>t;t+=1)if(void 0!==n[t].data&&n[t].data instanceof Array&&n[t].data.length>0)return!0;return!1}},n}(EasyAutocomplete||{}),EasyAutocomplete=function(n){return n.proccess=function(t,i,r){function e(n,i){var u=[],e="",r,o;if(t.get("list").match.enabled)for(r=0,o=n.length;o>r;r+=1)e=t.get("getValue")(n[r]),f(e,i)&&u.push(n[r]);else u=n;return u}function f(n,i){return t.get("list").match.caseSensitive||("string"==typeof n&&(n=n.toLowerCase()),i=i.toLowerCase()),!!t.get("list").match.method(n,i)}function o(n){return void 0!==i.maxNumberOfElements&&n.length>i.maxNumberOfElements&&(n=n.slice(0,i.maxNumberOfElements)),n}function s(n){return t.get("list").sort.enabled&&n.sort(t.get("list").sort.method),n}n.proccess.match=f;var u=i.data,h=r;return u=e(u,h),u=o(u),u=s(u)},n}(EasyAutocomplete||{}),EasyAutocomplete=function(n){return n.Template=function(n){var t={basic:{type:"basic",method:function(n){return n},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(n){return n+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(n){return n},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(n){return n},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(n){return n},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},i=function(n){var r,i=n.fields;return"description"===n.type?(r=t.description.method,"string"==typeof i.description?r=function(n,t){return n+" - <span>"+t[i.description]+"<\/span>"}:"function"==typeof i.description&&(r=function(n,t){return n+" - <span>"+i.description(t)+"<\/span>"}),r):"iconRight"===n.type?("string"==typeof i.iconSrc?r=function(n,t){return n+"<img class='eac-icon' src='"+t[i.iconSrc]+"' />"}:"function"==typeof i.iconSrc&&(r=function(n,t){return n+"<img class='eac-icon' src='"+i.iconSrc(t)+"' />"}),r):"iconLeft"===n.type?("string"==typeof i.iconSrc?r=function(n,t){return"<img class='eac-icon' src='"+t[i.iconSrc]+"' />"+n}:"function"==typeof i.iconSrc&&(r=function(n,t){return"<img class='eac-icon' src='"+i.iconSrc(t)+"' />"+n}),r):"links"===n.type?("string"==typeof i.link?r=function(n,t){return"<a href='"+t[i.link]+"' >"+n+"<\/a>"}:"function"==typeof i.link&&(r=function(n,t){return"<a href='"+i.link(t)+"' >"+n+"<\/a>"}),r):"custom"===n.type?n.method:t.basic.method},r=function(n){return n&&n.type&&n.type&&t[n.type]?i(n):t.basic.method},u=function(n){var i=function(){return""};return n&&n.type&&n.type&&t[n.type]?function(){var i=t[n.type].cssClass;return function(){return i}}():i};this.getTemplateClass=u(n);this.build=r(n)},n}(EasyAutocomplete||{}),EasyAutocomplete=function(n){return n.main=function(t,i){function d(){return 0===u.length?void a.error("Input field doesn't exist."):r.checkDataUrlProperties()?r.checkRequiredProperties()?(w(),void g()):void a.error("Will not work without mentioned properties."):void a.error("One of options variables 'data' or 'url' must be defined.")}function w(){function n(){var i=$("<div>"),n=s.getValue("WRAPPER_CSS_CLASS");r.get("theme")&&""!==r.get("theme")&&(n+=" eac-"+r.get("theme"));r.get("cssClasses")&&""!==r.get("cssClasses")&&(n+=" "+r.get("cssClasses"));""!==p.getTemplateClass()&&(n+=" "+p.getTemplateClass());i.addClass(n);u.wrap(i);r.get("adjustWidth")===!0&&t()}function t(){var n=u.outerWidth();u.parent().css("width",n)}function i(){u.unwrap()}function o(){var n=$("<div>").addClass(s.getValue("CONTAINER_CLASS"));n.attr("id",b()).prepend($("<ul>")),function(){n.on("show.eac",function(){var t,i;switch(r.get("list").showAnimation.type){case"slide":t=r.get("list").showAnimation.time;i=r.get("list").showAnimation.callback;n.find("ul").slideDown(t,i);break;case"fade":t=r.get("list").showAnimation.time;i=r.get("list").showAnimation.callback;n.find("ul").fadeIn(t);i;break;default:n.find("ul").show()}r.get("list").onShowListEvent()}).on("hide.eac",function(){var t,i;switch(r.get("list").hideAnimation.type){case"slide":t=r.get("list").hideAnimation.time;i=r.get("list").hideAnimation.callback;n.find("ul").slideUp(t,i);break;case"fade":t=r.get("list").hideAnimation.time;i=r.get("list").hideAnimation.callback;n.find("ul").fadeOut(t,i);break;default:n.find("ul").hide()}r.get("list").onHideListEvent()}).on("selectElement.eac",function(){n.find("ul li").removeClass("selected");n.find("ul li").eq(f).addClass("selected");r.get("list").onSelectItemEvent()}).on("loadElements.eac",function(t,i,o){var y="",v=n.find("ul"),h,c,b;v.empty().detach();e=[];for(var w=0,s=0,k=i.length;k>s;s+=1)if(h=i[s].data,0!==h.length)for(void 0!==i[s].header&&i[s].header.length>0&&v.append("<div class='eac-category' >"+i[s].header+"<\/div>"),c=0,b=h.length;b>c&&w<i[s].maxListSize;c+=1)y=$("<li><div class='eac-item'><\/div><\/li>"),function(){var t=c,n=w,e=i[s].getValue(h[t]);y.find(" > div").on("click",function(){u.val(e).trigger("change");f=n;l(n);r.get("list").onClickEvent();r.get("list").onChooseEvent()}).mouseover(function(){f=n;l(n);r.get("list").onMouseOverEvent()}).mouseout(function(){r.get("list").onMouseOutEvent()}).html(p.build(a(e,o),h[t]))}(),v.append(y),e.push(h[c]),w+=1;n.append(v);r.get("list").onLoadEvent()})}();u.after(n)}function h(){u.next("."+s.getValue("CONTAINER_CLASS")).remove()}function a(n,t){return r.get("highlightPhrase")&&""!==t?y(n,t):n}function v(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function y(n,t){var i=v(t);return(n+"").replace(new RegExp("("+i+")","gi"),"<b>$1<\/b>")}u.parent().hasClass(s.getValue("WRAPPER_CSS_CLASS"))&&(h(),i());n();o();c=$("#"+b());r.get("placeholder")&&u.attr("placeholder",r.get("placeholder"))}function b(){var n=u.attr("id");return s.getValue("CONTAINER_ID")+n}function g(){function n(){tt("autocompleteOff",!0)&&b();t();i();s();c();p();w()}function t(){u.focusout(function(){var t,i=u.val(),n,o;for(r.get("list").match.caseSensitive||(i=i.toLowerCase()),n=0,o=e.length;o>n;n+=1)if(t=r.get("getValue")(e[n]),r.get("list").match.caseSensitive||(t=t.toLowerCase()),t===i)return f=n,void l(f)})}function i(){u.off("keyup").keyup(function(n){function i(n){function e(){var t={},i=r.get("ajaxSettings")||{},n;for(n in i)t[n]=i[n];return t}function s(n,t){return r.get("matchResponseProperty")!==!1?"string"==typeof r.get("matchResponseProperty")?t[r.get("matchResponseProperty")]===n:"function"==typeof r.get("matchResponseProperty")?r.get("matchResponseProperty")(t)===n:!0:!0}var f,i,t;n.length<r.get("minCharNumber")||("list-required"!==r.get("data")&&(f=r.get("data"),i=o.init(f),i=o.updateCategories(i,f),i=o.processData(i,n),k(i,n),u.parent().find("li").length>0?v():h()),t=e(),void 0!==t.url&&""!==t.url||(t.url=r.get("url")),void 0!==t.dataType&&""!==t.dataType||(t.dataType=r.get("dataType")),void 0!==t.url&&"list-required"!==t.url&&(t.url=t.url(n),t.data=r.get("preparePostData")(t.data,n),$.ajax(t).done(function(t){var i=o.init(t);i=o.updateCategories(i,t);i=o.convertXml(i);s(n,t)&&(i=o.processData(i,n),k(i,n));o.checkIfDataExists(i)&&u.parent().find("li").length>0?v():h();r.get("ajaxCallback")()}).fail(function(){a.warning("Fail to load response data")}).always(function(){})))}switch(n.keyCode){case 27:h();nt();break;case 38:n.preventDefault();e.length>0&&f>0&&(f-=1,u.val(r.get("getValue")(e[f])),l(f));break;case 40:n.preventDefault();e.length>0&&f<e.length-1&&(f+=1,u.val(r.get("getValue")(e[f])),l(f));break;default:if(n.keyCode>40||8===n.keyCode){var t=u.val();r.get("list").hideOnEmptyPhrase!==!0||8!==n.keyCode||""!==t?r.get("requestDelay")>0?(void 0!==y&&clearTimeout(y),y=setTimeout(function(){i(t)},r.get("requestDelay"))):i(t):h()}}})}function s(){u.on("keydown",function(n){n=n||window.event;var t=n.keyCode;if(38===t)return(suppressKeypress=!0,!1)}).keydown(function(n){13===n.keyCode&&f>-1&&(u.val(r.get("getValue")(e[f])),r.get("list").onKeyEnterEvent(),r.get("list").onChooseEvent(),f=-1,h(),n.preventDefault())})}function c(){u.off("keypress")}function p(){u.focus(function(){""!==u.val()&&e.length>0&&(f=-1,v())})}function w(){u.blur(function(){setTimeout(function(){f=-1;h()},250)})}function b(){u.attr("autocomplete","off")}n()}function v(){c.trigger("show.eac")}function h(){c.trigger("hide.eac")}function l(n){c.trigger("selectElement.eac",n)}function k(n,t){c.trigger("loadElements.eac",[n,t])}function nt(){u.trigger("blur")}var y,s=new n.Constans,r=new n.Configuration(i),a=new n.Logger,p=new n.Template(i.template),o=new n.ListBuilderService(r,n.proccess),tt=r.equals,u=t,c="",e=[],f=-1;n.consts=s;this.getConstants=function(){return s};this.getConfiguration=function(){return r};this.getContainer=function(){return c};this.getSelectedItemIndex=function(){return f};this.getItems=function(){return e};this.getItemData=function(n){return e.length<n||void 0===e[n]?-1:e[n]};this.getSelectedItemData=function(){return this.getItemData(f)};this.build=function(){w()};this.init=function(){d()}},n.eacHandles=[],n.getHandle=function(t){return n.eacHandles[t]},n.inputHasId=function(n){return void 0!==$(n).attr("id")&&$(n).attr("id").length>0},n.assignRandomId=function(t){var i="";do i="eac-"+Math.floor(1e4*Math.random());while(0!==$("#"+i).length);elementId=n.consts.getValue("CONTAINER_ID")+i;$(t).attr("id",i)},n.setHandle=function(t,i){n.eacHandles[i]=t},n}(EasyAutocomplete||{});!function(n){n.fn.easyAutocomplete=function(t){return this.each(function(){var i=n(this),r=new EasyAutocomplete.main(i,t);EasyAutocomplete.inputHasId(i)||EasyAutocomplete.assignRandomId(i);r.init();EasyAutocomplete.setHandle(r,i.attr("id"))})};n.fn.getSelectedItemIndex=function(){var t=n(this).attr("id");return void 0!==t?EasyAutocomplete.getHandle(t).getSelectedItemIndex():-1};n.fn.getItems=function(){var t=n(this).attr("id");return void 0!==t?EasyAutocomplete.getHandle(t).getItems():-1};n.fn.getItemData=function(t){var i=n(this).attr("id");return void 0!==i&&t>-1?EasyAutocomplete.getHandle(i).getItemData(t):-1};n.fn.getSelectedItemData=function(){var t=n(this).attr("id");return void 0!==t?EasyAutocomplete.getHandle(t).getSelectedItemData():-1}}(jQuery);!function(n,t){function v(n,t,r){var e=n.children(),o=!1,u,s,f;for(n.empty(),u=0,s=e.length;s>u;u++){if(f=e.eq(u),n.append(f),r&&n.append(r),i(n,t)){f.remove();o=!0;break}r&&r.detach()}return o}function f(t,r,u,e,o){var s=!1,h="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",c="script, .dotdotdot-keep";return t.contents().detach().each(function(){var a=this,l=n(a);if("undefined"==typeof a)return!0;if(l.is(c))t.append(l);else{if(s)return!0;t.append(l);!o||l.is(e.after)||l.find(e.after).length||t[t.is(h)?"after":"append"](o);i(u,e)&&(s=3==a.nodeType?y(l,r,u,e,o):f(l,r,u,e,o));s||o&&o.detach()}}),r.addClass("is-truncated"),s}function y(t,f,o,h,c){var l=t[0],nt,k,d;if(!l)return!1;var y=s(l),tt=-1!==y.indexOf(" ")?" ":"　",p="letter"==h.wrap?"":tt,a=y.split(p),g=-1,w=-1,b=0,v=a.length-1;for(h.fallbackToLetter&&0==b&&0==v&&(p="",a=y.split(p),v=a.length-1);v>=b&&(0!=b||0!=v);){if(nt=Math.floor((b+v)/2),nt==w)break;w=nt;u(l,a.slice(0,w+1).join(p)+h.ellipsis);o.children().each(function(){n(this).toggle().toggle()});i(o,h)?(v=w,h.fallbackToLetter&&0==b&&0==v&&(p="",a=a[0].split(p),g=-1,w=-1,b=0,v=a.length-1)):(g=w,b=w)}return-1==g||1==a.length&&0==a[0].length?(k=t.parent(),t.detach(),d=c&&c.closest(k).length?c.length:0,k.contents().length>d?l=r(k.contents().eq(-1-d),f):(l=r(k,f,!0),d||k.detach()),l&&(y=e(s(l),h),u(l,y),d&&c&&n(l).parent().append(c))):(y=e(a.slice(0,g+1).join(p),h),u(l,y)),!0}function i(n,t){return n.innerHeight()>t.maxHeight}function e(t,i){for(;n.inArray(t.slice(-1),i.lastCharacter.remove)>-1;)t=t.slice(0,-1);return n.inArray(t.slice(-1),i.lastCharacter.noEllipsis)<0&&(t+=i.ellipsis),t}function o(n){return{width:n.innerWidth(),height:n.innerHeight()}}function u(n,t){n.innerText?n.innerText=t:n.nodeValue?n.nodeValue=t:n.textContent&&(n.textContent=t)}function s(n){return n.innerText?n.innerText:n.nodeValue?n.nodeValue:n.textContent?n.textContent:""}function h(n){do n=n.previousSibling;while(n&&1!==n.nodeType&&3!==n.nodeType);return n}function r(t,i,u){var f,e=t&&t[0];if(e){if(!u){if(3===e.nodeType)return e;if(n.trim(t.text()))return r(t.contents().last(),i)}for(f=h(e);!f;){if(t=t.parent(),t.is(i)||!t.length)return!1;f=h(t[0])}if(f)return r(n(f),i)}return!1}function p(t,i){return t?"string"==typeof t?(t=n(t,i),t.length?t:!1):t.jquery?t:!1:!1}function w(n){for(var t,r=n.innerHeight(),u=["paddingTop","paddingBottom"],i=0,f=u.length;f>i;i++)t=parseInt(n.css(u[i]),10),isNaN(t)&&(t=0),r-=t;return r}var c,l,a;n.fn.dotdotdot||(n.fn.dotdotdot=function(t){var r,h;if(0==this.length)return n.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){n(this).dotdotdot(t)});r=this;h=r.contents();r.data("dotdotdot")&&r.trigger("destroy.dot");r.data("dotdotdot-style",r.attr("style")||"");r.css("word-wrap","break-word");"nowrap"===r.css("white-space")&&r.css("white-space","normal");r.bind_events=function(){return r.bind("update.dot",function(t,o){switch(r.removeClass("is-truncated"),t.preventDefault(),t.stopPropagation(),typeof u.height){case"number":u.maxHeight=u.height;break;case"function":u.maxHeight=u.height.call(r[0]);break;default:u.maxHeight=w(r)}u.maxHeight+=u.tolerance;"undefined"!=typeof o&&(("string"==typeof o||"nodeType"in o&&1===o.nodeType)&&(o=n("<div />").append(o).contents()),o instanceof n&&(h=o));s=r.wrapInner('<div class="dotdotdot" />').children();s.contents().detach().end().append(h.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,l=!1;return e.afterElement&&(c=e.afterElement.clone(!0),c.show(),e.afterElement.detach()),i(s,u)&&(l="children"==u.wrap?v(s,u,c):f(s,r,s,u,c)),s.replaceWith(s.contents()),s=null,n.isFunction(u.callback)&&u.callback.call(r[0],l,h),e.isTruncated=l,l}).bind("isTruncated.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),"function"==typeof t&&t.call(r[0],e.isTruncated),e.isTruncated}).bind("originalContent.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),"function"==typeof t&&t.call(r[0],h),h}).bind("destroy.dot",function(n){n.preventDefault();n.stopPropagation();r.unwatch().unbind_events().contents().detach().end().append(h).attr("style",r.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),r};r.unbind_events=function(){return r.unbind(".dot"),r};r.watch=function(){if(r.unwatch(),"window"==u.watch){var t=n(window),i=t.width(),f=t.height();t.bind("resize.dot"+e.dotId,function(){i==t.width()&&f==t.height()&&u.windowResizeFix||(i=t.width(),f=t.height(),l&&clearInterval(l),l=setTimeout(function(){r.trigger("update.dot")},100))})}else a=o(r),l=setInterval(function(){if(r.is(":visible")){var n=o(r);a.width==n.width&&a.height==n.height||(r.trigger("update.dot"),a=n)}},500);return r};r.unwatch=function(){return n(window).unbind("resize.dot"+e.dotId),l&&clearInterval(l),r};var u=n.extend(!0,{},n.fn.dotdotdot.defaults,t),e={},a={},l=null,s=null;return u.lastCharacter.remove instanceof Array||(u.lastCharacter.remove=n.fn.dotdotdot.defaultArrays.lastCharacter.remove),u.lastCharacter.noEllipsis instanceof Array||(u.lastCharacter.noEllipsis=n.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),e.afterElement=p(u.after,r),e.isTruncated=!1,e.dotId=c++,r.data("dotdotdot",!0).bind_events().trigger("update.dot"),u.watch&&r.watch(),r},n.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},n.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},n.fn.dotdotdot.debug=function(){},c=1,l=n.fn.html,n.fn.html=function(i){return i!=t&&!n.isFunction(i)&&this.data("dotdotdot")?this.trigger("update",[i]):l.apply(this,arguments)},a=n.fn.text,n.fn.text=function(i){return i!=t&&!n.isFunction(i)&&this.data("dotdotdot")?(i=n("<div />").text(i).html(),this.trigger("update",[i])):a.apply(this,arguments)})}(jQuery);jQuery(document).ready(function(n){n(".dot-ellipsis").each(function(){var r=n(this).hasClass("dot-resize-update"),u=n(this).hasClass("dot-timer-update"),i=0,f=n(this).attr("class").split(/\s+/),t;n.each(f,function(n,t){var r=t.match(/^dot-height-(\d+)$/);null!==r&&(i=Number(r[1]))});t={};u&&(t.watch=!0);r&&(t.watch="window");i>0&&(t.height=i);n(this).dotdotdot(t)})});jQuery(window).load(function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")});!function(n){return"function"==typeof define&&define.amd?define(["jquery"],function(t){return n(t,window,document)}):"object"==typeof exports?module.exports=n(require("jquery"),window,document):n(jQuery,window,document)}(function(n,t,i){"use strict";var a,u,o,s,v,y,ct,lt,p,w,b,k,f,d,it,h,r,at,g,e,rt,c,ut,ft,et,ot,nt,tt,st,ht,l;ut={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null};at="scrollbar";r="scroll";p="mousedown";w="mouseenter";b="mousemove";f="mousewheel";k="mouseup";h="resize";v="drag";y="enter";e="up";it="panedown";o="DOMMouseScroll";s="down";rt="wheel";ct="keydown";lt="keyup";g="touchmove";a="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject;u=null;nt=t.requestAnimationFrame;c=t.cancelAnimationFrame;st=i.createElement("div").style;l=function(){var n,r,f,t,i,u;for(t=["t","webkitT","MozT","msT","OT"],n=i=0,u=t.length;u>i;n=++i)if(f=t[n],r=t[n]+"ransform",r in st)return t[n].substr(0,t[n].length-1);return!1}();ht=function(n){return l===!1?!1:""===l?n:l+n.charAt(0).toUpperCase()+n.substr(1)};tt=ht("transform");et=tt!==!1;ft=function(){var n,t,u;return n=i.createElement("div"),t=n.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=r,t.top="-9999px",i.body.appendChild(n),u=n.offsetWidth-n.clientWidth,i.body.removeChild(n),u};ot=function(){var r,i,n;return i=t.navigator.userAgent,(r=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),r&&+n>23):!1};d=function(){function l(r,f){this.el=r;this.options=f;u||(u=ft());this.$el=n(this.el);this.doc=n(this.options.documentContext||i);this.win=n(this.options.windowContext||t);this.body=this.doc.find("body");this.$content=this.$el.children("."+this.options.contentClass);this.$content.attr("tabindex",this.options.tabIndex||0);this.content=this.$content[0];this.previousPosition=0;this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate();this.createEvents();this.addEvents();this.reset()}return l.prototype.preventScrolling=function(n,t){if(this.isActive)if(n.type===o)(t===s&&n.originalEvent.detail>0||t===e&&n.originalEvent.detail<0)&&n.preventDefault();else if(n.type===f){if(!n.originalEvent||!n.originalEvent.wheelDelta)return;(t===s&&n.originalEvent.wheelDelta<0||t===e&&n.originalEvent.wheelDelta>0)&&n.preventDefault()}},l.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"});this.iOSNativeScrolling=!0;this.isActive=!0},l.prototype.updateScrollValues=function(){var n,t;n=this.content;this.maxScrollTop=n.scrollHeight-n.clientHeight;this.prevScrollTop=this.contentScrollTop||0;this.contentScrollTop=n.scrollTop;t=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same";this.previousPosition=this.contentScrollTop;"same"!==t&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:t});this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},l.prototype.setOnScrollStyles=function(){var n;et?(n={},n[tt]="translate(0, "+this.sliderTop+"px)"):n={top:this.sliderTop};nt?(c&&this.scrollRAF&&c(this.scrollRAF),this.scrollRAF=nt(function(t){return function(){return t.scrollRAF=null,t.slider.css(n)}}(this))):this.slider.css(n)},l.prototype.createEvents=function(){this.events={down:function(n){return function(t){return n.isBeingDragged=!0,n.offsetY=t.pageY-n.slider.offset().top,n.slider.is(t.target)||(n.offsetY=0),n.pane.addClass(n.options.activeClass),n.doc.bind(b,n.events[v]).bind(k,n.events[e]),n.body.bind(w,n.events[y]),!1}}(this),drag:function(n){return function(t){return n.sliderY=t.pageY-n.$el.offset().top-n.paneTop-(n.offsetY||.5*n.sliderHeight),n.scroll(),n.contentScrollTop>=n.maxScrollTop&&n.prevScrollTop!==n.maxScrollTop?n.$el.trigger("scrollend"):0===n.contentScrollTop&&0!==n.prevScrollTop&&n.$el.trigger("scrolltop"),!1}}(this),up:function(n){return function(){return n.isBeingDragged=!1,n.pane.removeClass(n.options.activeClass),n.doc.unbind(b,n.events[v]).unbind(k,n.events[e]),n.body.unbind(w,n.events[y]),!1}}(this),resize:function(n){return function(){n.reset()}}(this),panedown:function(n){return function(t){return n.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*n.sliderHeight,n.scroll(),n.events.down(t),!1}}(this),scroll:function(n){return function(t){n.updateScrollValues();n.isBeingDragged||(n.iOSNativeScrolling||(n.sliderY=n.sliderTop,n.setOnScrollStyles()),null!=t&&(n.contentScrollTop>=n.maxScrollTop?(n.options.preventPageScrolling&&n.preventScrolling(t,s),n.prevScrollTop!==n.maxScrollTop&&n.$el.trigger("scrollend")):0===n.contentScrollTop&&(n.options.preventPageScrolling&&n.preventScrolling(t,e),0!==n.prevScrollTop&&n.$el.trigger("scrolltop"))))}}(this),wheel:function(n){return function(t){var i;if(null!=t)return i=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail,i&&(n.sliderY+=-i/3),n.scroll(),!1}}(this),enter:function(n){return function(t){var i;if(n.isBeingDragged)return 1!==(t.buttons||t.which)?(i=n.events)[e].apply(i,arguments):void 0}}(this)}},l.prototype.addEvents=function(){var n;this.removeEvents();n=this.events;this.options.disableResize||this.win.bind(h,n[h]);this.iOSNativeScrolling||(this.slider.bind(p,n[s]),this.pane.bind(p,n[it]).bind(""+f+" "+o,n[rt]));this.$content.bind(""+r+" "+f+" "+o+" "+g,n[r])},l.prototype.removeEvents=function(){var n;n=this.events;this.win.unbind(h,n[h]);this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind());this.$content.unbind(""+r+" "+f+" "+o+" "+g,n[r])},l.prototype.generate=function(){var s,i,e,n,o,r,f;return n=this.options,r=n.paneClass,f=n.sliderClass,s=n.contentClass,(o=this.$el.children("."+r)).length||o.children("."+f).length||this.$el.append('<div class="'+r+'"><div class="'+f+'" /><\/div>'),this.pane=this.$el.children("."+r),this.slider=this.pane.find("."+f),0===u&&ot()?(e=t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+e+14}):u&&(i={right:-u},this.$el.addClass(n.enabledClass)),null!=i&&this.$content.css(i),this},l.prototype.restore=function(){this.stopped=!1;this.iOSNativeScrolling||this.pane.show();this.addEvents()},l.prototype.reset=function(){var n,s,h,c,i,y,f,e,l,o,v,t;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),n=this.content,c=n.style,i=c.overflowY,a&&this.$content.css({height:this.$content.height()}),s=n.scrollHeight+u,o=parseInt(this.$el.css("max-height"),10),o>0&&(this.$el.height(""),this.$el.height(n.scrollHeight>o?o:n.scrollHeight)),f=this.pane.outerHeight(!1),l=parseInt(this.pane.css("top"),10),y=parseInt(this.pane.css("bottom"),10),e=f+l+y,t=Math.round(e/s*f),t<this.options.sliderMinHeight?t=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&t>this.options.sliderMaxHeight&&(t=this.options.sliderMaxHeight),i===r&&c.overflowX!==r&&(t+=u),this.maxSliderTop=e-t,this.contentHeight=s,this.paneHeight=f,this.paneOuterHeight=e,this.sliderHeight=t,this.paneTop=l,this.slider.height(t),this.events.scroll(),this.pane.show(),this.isActive=!0,n.scrollHeight===n.clientHeight||this.pane.outerHeight(!0)>=n.scrollHeight&&i!==r?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===n.scrollHeight&&i===r?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),h=this.$content.css("position"),("static"===h||"relative"===h)&&(v=parseInt(this.$content.css("right"),10),v&&this.$content.css({right:"",marginRight:v})),this)},l.prototype.scroll=function(){if(this.isActive)return(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this)},l.prototype.scrollBottom=function(n){if(this.isActive)return(this.$content.scrollTop(this.contentHeight-this.$content.height()-n).trigger(f),this.stop().restore(),this)},l.prototype.scrollTop=function(n){if(this.isActive)return(this.$content.scrollTop(+n).trigger(f),this.stop().restore(),this)},l.prototype.scrollTo=function(n){if(this.isActive)return(this.scrollTop(this.$el.find(n).get(0).offsetTop),this)},l.prototype.stop=function(){return c&&this.scrollRAF&&(c(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},l.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),a&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},l.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return(this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(n){return function(){n.pane.removeClass(n.options.flashedClass)}}(this),this.options.flashDelay),this)},l}();n.fn.nanoScroller=function(t){return this.each(function(){var r,i;if((i=this.nanoscroller)||(r=n.extend({},ut,t),this.nanoscroller=i=new d(this,r)),t&&"object"==typeof t){if(n.extend(i.options,t),null!=t.scrollBottom)return i.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return i.scrollTop(t.scrollTop);if(t.scrollTo)return i.scrollTo(t.scrollTo);if("bottom"===t.scroll)return i.scrollBottom(0);if("top"===t.scroll)return i.scrollTop(0);if(t.scroll&&t.scroll instanceof n)return i.scrollTo(t.scroll);if(t.stop)return i.stop();if(t.destroy)return i.destroy();if(t.flash)return i.flash()}return i.reset()})};n.fn.nanoScroller.Constructor=d}),function(n,t){typeof define=="function"&&define.amd?define(["jquery"],function(i){return t(n,i)}):typeof module=="object"&&typeof module.exports=="object"?module.exports=t(n,require("jquery")):n.lity=t(n,n.jQuery||n.Zepto)}(typeof window!="undefined"?window:this,function(n,t){"use strict";function c(){y[e>0?"addClass":"removeClass"]("lity-active")}function a(n){var i=t.Deferred();if(l){n.one(l,i.resolve);setTimeout(i.resolve,500)}else i.resolve();return i.promise()}function f(n,i,r){if(arguments.length===1)return t.extend({},n);if(typeof i=="string"){if(typeof r=="undefined")return typeof n[i]=="undefined"?null:n[i];n[i]=r}else t.extend(n,i);return this}function v(n){for(var i=decodeURI(n).split("&"),u={},r,t=0,f=i.length;t<f;t++)i[t]&&(r=i[t].split("="),u[r[0]]=r[1]);return u}function o(n,i){return n+(n.indexOf("?")>-1?"&":"?")+t.param(i)}function d(n){return t('<span class="lity-error"/>').append(n)}function g(n){if(!p.test(n))return!1;var r=t('<img src="'+n+'">'),i=t.Deferred(),u=function(){i.reject(d("Failed loading image"))};r.on("load",function(){if(this.naturalWidth===0)return u();i.resolve(r)}).on("error",u);return i.promise()}function nt(n){var i,r;try{i=t(n)}catch(u){return!1}if(!i.length)return!1;r=t('<span style="display:none !important" class="lity-inline-placeholder"/>');return i.after(r).on("lity:ready",function(n,t){t.one("lity:remove",function(){r.before(i.addClass("lity-hide")).remove()})})}function tt(n){var i,r=n;return i=w.exec(n),i&&(r=o("https://www.youtube"+(i[2]||"")+".com/embed/"+i[4],t.extend({autoplay:1},v(i[5]||"")))),i=b.exec(n),i&&(r=o("https://player.vimeo.com/video/"+i[3],t.extend({autoplay:1},v(i[4]||"")))),i=k.exec(n),i&&(r=o("https://www.google."+i[3]+"/maps?"+i[6],{output:i[6].indexOf("layer=c")>0?"svembed":"embed"})),'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+r+'"><\/iframe><\/div>'}function i(n){function k(n){n.keyCode===27&&v()}function p(){var n=r.documentElement.clientHeight?r.documentElement.clientHeight:Math.round(u.height());l.css("max-height",Math.floor(n)+"px").trigger("lity:resize",[i])}function g(n,r){if(i){l=t(r);u.on("resize",p);p();i.find(".lity-loader").each(function(){var n=t(this);a(n).always(function(){n.remove()})});i.removeClass("lity-loading").find(".lity-content").empty().append(l);l.removeClass("lity-hide").trigger("lity:ready",[i,n]);y.resolve()}}function nt(n,r,f,o){if(y=t.Deferred(),e++,c(),i=t(f.template).addClass("lity-loading").appendTo("body"),!!f.esc)u.on("keyup",k);setTimeout(function(){i.addClass("lity-opened lity-"+n).on("click","[data-lity-close]",function(n){t(n.target).is("[data-lity-close]")&&v()}).trigger("lity:open",[i,o]);t.when(r).always(t.proxy(g,null,o))},0)}function d(n,i,r){var e,u,f=t.extend({},s,b),c,l;return i=t.extend({},h,w,i),i.handler&&f[i.handler]?(u=f[i.handler](n,o),e=i.handler):(c={},t.each(["inline","iframe"],function(n,t){f[t]&&(c[t]=f[t]);delete f[t]}),l=function(t,i){return i?(u=i(n,o),!u?void 0:(e=t,!1)):!0},t.each(f,l),e||t.each(c,l)),u&&t.when(v()).done(t.proxy(nt,null,e,u,i,r)),!!u}function v(){if(i){var n=t.Deferred();return y.done(function(){e--;c();u.off("resize",p).off("keyup",k);l.trigger("lity:close",[i]);i.removeClass("lity-opened").addClass("lity-closed");var t=i,r=l;i=null;l=null;a(r.add(t)).always(function(){r.trigger("lity:remove",[t]);t.remove();n.resolve()})}),n.promise()}}function o(n){var i,r,u;if(!n.preventDefault)return o.open(n);(i=t(this),r=i.data("lity-target")||i.attr("href")||i.attr("src"),r)&&(u=i.data("lity-options")||i.data("lity"),d(r,u,i)&&(i.blur(),n.preventDefault()))}var w={},b={},i,l,y=t.Deferred().resolve();return o.handlers=t.proxy(f,o,b),o.options=t.proxy(f,o,w),o.open=function(n,t,i){return d(n,t,i),o},o.close=function(){return v(),o},o.options(n)}var r=n.document,u=t(n),y=t("html"),e=0,p=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,w=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,b=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,k=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,s={image:g,inline:nt,iframe:tt},h={esc:!0,handler:null,template:'<div class="lity" tabindex="-1"><div class="lity-wrap" data-lity-close><div class="lity-loader">Loading...<\/div><div class="lity-container"><div class="lity-content"><\/div><button class="lity-close" type="button" title="Close (Esc)" data-lity-close>×<\/button><\/div><\/div><\/div>'},l=function(){var i=r.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(i.style[n]!==undefined)return t[n];return!1}();i.version="1.6.6";i.handlers=t.proxy(f,i,s);i.options=t.proxy(f,i,h);t(r).on("click","[data-lity]",i());return i}),function(){var t,n;t=this.jQuery||window.jQuery;n=t(window);t.fn.stick_in_parent=function(i){var s,a,e,h,r,u,v,o,l,f,y,c,p;for(i==null&&(i={}),f=i.sticky_class,h=i.inner_scrolling,l=i.recalc_every,o=i.parent,u=i.offset_top,r=i.spacer,e=i.bottoming,u==null&&(u=0),o==null&&(o=void 0),h==null&&(h=!0),f==null&&(f="is_stuck"),s=t(document),e==null&&(e=!0),v=function(n){var t,i,r;return window.getComputedStyle?(r=n[0],t=window.getComputedStyle(n[0]),i=parseFloat(t.getPropertyValue("width"))+parseFloat(t.getPropertyValue("margin-left"))+parseFloat(t.getPropertyValue("margin-right")),t.getPropertyValue("box-sizing")!=="border-box"&&(i+=parseFloat(t.getPropertyValue("border-left-width"))+parseFloat(t.getPropertyValue("border-right-width"))+parseFloat(t.getPropertyValue("padding-left"))+parseFloat(t.getPropertyValue("padding-right"))),i):n.outerWidth(!0)},y=function(i,c,a,y,p,w,b,k){var rt,st,tt,ot,ht,g,nt,ut,ft,et,d,it;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),ht=s.height(),nt=i.parent(),o!=null&&(nt=nt.closest(o)),!nt.length)throw"failed to find stick parent";if(tt=!1,rt=!1,d=r!=null?r&&i.closest(r):t("<div />"),d&&d.css("position",i.css("position")),ut=function(){var n,t,e;if(!k)return ht=s.height(),n=parseInt(nt.css("border-top-width"),10),t=parseInt(nt.css("padding-top"),10),c=parseInt(nt.css("padding-bottom"),10),a=nt.offset().top+n+t,y=nt.height(),tt&&(tt=!1,rt=!1,r==null&&(i.insertAfter(d),d.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(f),e=!0),p=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-u,w=i.outerHeight(!0),b=i.css("float"),d&&d.css({width:v(i),height:"100%",display:i.css("display"),"vertical-align":i.css("vertical-align"),float:b}),e?it():void 0},ut(),w!==y){ot=void 0;g=u;et=l;it=function(){var o,st,it,t,v,ft;if(!k)return it=!1,et!=null&&(et-=1,et<=0&&(et=l,ut(),it=!0)),it||s.height()===ht||(ut(),it=!0),t=n.scrollTop(),ot!=null&&(st=t-ot),ot=t,tt?(e&&(v=t+w+g>y+a,rt&&!v&&(rt=!1,i.css({position:"fixed",bottom:"",top:g}).trigger("sticky_kit:unbottom"))),t<p&&(tt=!1,g=u,r==null&&((b==="left"||b==="right")&&i.insertAfter(d),d.detach()),o={position:"",width:"",top:""},i.css(o).removeClass(f).trigger("sticky_kit:unstick")),h&&(ft=n.height(),w+u>ft&&(rt||(g-=st,g=Math.max(ft-w,g),g=Math.min(u,g),tt&&i.css({top:g+"px"}))))):t>p&&(tt=!0,o={position:"fixed",top:g},o.width=i.css("box-sizing")==="border-box"?i.outerWidth()+"px":i.width()+"px",i.css(o).addClass(f),r==null&&(i.after(d),(b==="left"||b==="right")&&d.append(i)),i.trigger("sticky_kit:stick")),tt&&e&&(v==null&&(v=t+w+g>y+a),!rt&&v)?(rt=!0,nt.css("position")==="static"&&nt.css({position:"relative"}),i.css({position:"absolute",bottom:c,top:"auto"}).trigger("sticky_kit:bottom")):void 0};ft=function(){return ut(),it()};st=function(){return k=!0,n.off("touchmove",it),n.off("scroll",it),n.off("resize",ft),t(document.body).off("sticky_kit:recalc",ft),i.off("sticky_kit:detach",st),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),nt.position("position",""),tt?(r==null&&((b==="left"||b==="right")&&i.insertAfter(d),d.remove()),i.removeClass(f)):void 0};n.on("touchmove",it);n.on("scroll",it);n.on("resize",ft);t(document.body).on("sticky_kit:recalc",ft);i.on("sticky_kit:detach",st);return setTimeout(it,0)}}},c=0,p=this.length;c<p;c++)a=this[c],y(t(a));return this}}.call(this);scrollme=function(n){var t={},r=n(document),i=n(window);return t.body_height=0,t.viewport_height=0,t.viewport_top=0,t.viewport_bottom=0,t.viewport_top_previous=-1,t.elements=[],t.elements_in_view=[],t.property_defaults={opacity:.78,translatex:0,translatey:0,translatez:0,rotatex:0,rotatey:0,rotatez:0,scale:1,scalex:1,scaley:1,scalez:1},t.scrollme_selector=".scrollme",t.animateme_selector=".animateme",t.update_interval=10,t.easing_functions={linear:function(n){return n},easeout:function(n){return n*n*n},easein:function(n){return n=1-n,1-n*n*n},easeinout:function(n){return.5>n?4*n*n*n:(n=1-n,1-4*n*n*n)}},t.init_events=["ready","page:load","page:change"],t.init_if=function(){return!0},t.init=function(){return t.init_if()?(t.init_elements(),t.on_resize(),i.on("resize orientationchange",function(){t.on_resize()}),i.load(function(){setTimeout(function(){t.on_resize()},100)}),setInterval(t.update,t.update_interval),!0):!1},t.init_elements=function(){n(t.scrollme_selector).each(function(){var i={},r;i.element=n(this);r=[];n(this).find(t.animateme_selector).addBack(t.animateme_selector).each(function(){var i={},u;i.element=n(this);i.when=i.element.data("when");i.from=i.element.data("from");i.to=i.element.data("to");i.crop=i.element.is("[data-crop]")?i.element.data("crop"):!0;i.easing=i.element.is("[data-easing]")?t.easing_functions[i.element.data("easing")]:t.easing_functions.easeout;u={};i.element.is("[data-opacity]")&&(u.opacity=i.element.data("opacity"));i.element.is("[data-translatex]")&&(u.translatex=i.element.data("translatex"));i.element.is("[data-translatey]")&&(u.translatey=i.element.data("translatey"));i.element.is("[data-translatez]")&&(u.translatez=i.element.data("translatez"));i.element.is("[data-rotatex]")&&(u.rotatex=i.element.data("rotatex"));i.element.is("[data-rotatey]")&&(u.rotatey=i.element.data("rotatey"));i.element.is("[data-rotatez]")&&(u.rotatez=i.element.data("rotatez"));i.element.is("[data-scale]")&&(u.scale=i.element.data("scale"));i.element.is("[data-scalex]")&&(u.scalex=i.element.data("scalex"));i.element.is("[data-scaley]")&&(u.scaley=i.element.data("scaley"));i.element.is("[data-scalez]")&&(u.scalez=i.element.data("scalez"));i.properties=u;r.push(i)});i.effects=r;t.elements.push(i)})},t.update=function(){window.requestAnimationFrame(function(){t.update_viewport_position();t.viewport_top_previous!=t.viewport_top&&(t.update_elements_in_view(),t.animate());t.viewport_top_previous=t.viewport_top})},t.animate=function(){for(var n,e,s,a=t.elements_in_view.length,h=0;a>h;h++)for(var o=t.elements_in_view[h],w=o.effects.length,c=0;w>c;c++){n=o.effects[c];switch(n.when){case"view":case"span":e=o.top-t.viewport_height;s=o.bottom;break;case"exit":e=o.bottom-t.viewport_height;s=o.bottom;break;default:e=o.top-t.viewport_height;s=o.top}n.crop&&(0>e&&(e=0),s>t.body_height-t.viewport_height&&(s=t.body_height-t.viewport_height));var r=(t.viewport_top-e)/(s-e),i=n.from,u=n.to,b=u-i,k=(r-i)/b,f=n.easing(k),d=t.animate_value(r,f,i,u,n,"opacity"),g=t.animate_value(r,f,i,u,n,"translatey"),nt=t.animate_value(r,f,i,u,n,"translatex"),tt=t.animate_value(r,f,i,u,n,"translatez"),it=t.animate_value(r,f,i,u,n,"rotatex"),rt=t.animate_value(r,f,i,u,n,"rotatey"),ut=t.animate_value(r,f,i,u,n,"rotatez"),l=t.animate_value(r,f,i,u,n,"scale"),v=t.animate_value(r,f,i,u,n,"scalex"),y=t.animate_value(r,f,i,u,n,"scaley"),p=t.animate_value(r,f,i,u,n,"scalez");"scale"in n.properties&&(v=l,y=l,p=l);n.element.css({opacity:d,transform:"translate3d( "+nt+"px , "+g+"px , "+tt+"px ) rotateX( "+it+"deg ) rotateY( "+rt+"deg ) rotateZ( "+ut+"deg ) scale3d( "+v+" , "+y+" , "+p+" )"})}},t.animate_value=function(n,i,r,u,f,e){var h=t.property_defaults[e],c,s,o;if(!(e in f.properties)||(c=f.properties[e],s=u>r?!0:!1,r>n&&s))return h;if(n>u&&s)return c;if(n>r&&!s)return h;if(u>n&&!s)return c;o=h+i*(c-h);switch(e){case"opacity":o=o.toFixed(2);break;case"translatex":o=o.toFixed(0);break;case"translatey":o=o.toFixed(0);break;case"translatez":o=o.toFixed(0);break;case"rotatex":o=o.toFixed(1);break;case"rotatey":o=o.toFixed(1);break;case"rotatez":o=o.toFixed(1);break;case"scale":o=o.toFixed(3)}return o},t.update_viewport_position=function(){t.viewport_top=i.scrollTop();t.viewport_bottom=t.viewport_top+t.viewport_height},t.update_elements_in_view=function(){t.elements_in_view=[];for(var i=t.elements.length,n=0;i>n;n++)t.elements[n].top<t.viewport_bottom&&t.elements[n].bottom>t.viewport_top&&t.elements_in_view.push(t.elements[n])},t.on_resize=function(){t.update_viewport();t.update_element_heights();t.update_viewport_position();t.update_elements_in_view();t.animate()},t.update_viewport=function(){t.body_height=r.height();t.viewport_height=i.height()},t.update_element_heights=function(){for(var i,r,u=t.elements.length,n=0;u>n;n++)i=t.elements[n].element.outerHeight(),r=t.elements[n].element.offset(),t.elements[n].height=i,t.elements[n].top=r.top,t.elements[n].bottom=r.top+i},t}(jQuery),function(n){function i(i,u){this.element=i;this.options=n.extend({},r,u);this._defaults=r;this._name=t;this.init()}var t="gridMobileSlider",r={targerContainer:null,itemSelector:null,currentSlideClass:null,nextBtn:null,prevBtn:null};i.prototype.init=function(){var t=this,u=n(t.element),i,r;t.options.itemSelector!=null&&(i=n(t.options.itemSelector),t.options.targerContainer!=null&&(r=n(t.options.targerContainer),i.clone().appendTo(r),n(t.options.nextBtn).click(function(){var i=t.getCurrent(),n=i.next();return n.length>0&&(i.removeClass(t.options.currentSlideClass),t.getSlides().hide(),n.fadeIn(),n.addClass(t.options.currentSlideClass)),!1}),n(t.options.prevBtn).click(function(){var i=t.getCurrent(),n=i.prev();return n.length>0&&(i.removeClass(t.options.currentSlideClass),t.getSlides().hide(),n.fadeIn(),n.addClass(t.options.currentSlideClass)),!1})))};i.prototype.getSlides=function(){var t=this;return n(t.options.targerContainer).find(t.options.itemSelector)};i.prototype.getCurrent=function(){var t=this;return n(t.options.targerContainer).find(t.options.itemSelector+"."+t.options.currentSlideClass)};n.fn[t]=function(r){return this.each(function(){n.data(this,"plugin_"+t)||n.data(this,"plugin_"+t,new i(this,r))})}}(jQuery,window,document),function(n){function t(n,t){this.element=n;this.options=t;this._name=i;this.init()}var i="smoothScroll";t.prototype.init=function(){var t=this;n(t.element).length>0&&(t.onLoad(),n(t.element).bind("click",function(){t.onClick(this)}))};t.prototype.handleWaypoint=function(t){var r=n(this.element),i=n('.smoothScrollLink[href="#'+r.attr("name")+'"]');t=="up"?i.parent().prev().addClass("active").siblings().removeClass("active"):t=="down"&&i.parent().addClass("active").siblings().removeClass("active")};t.prototype.onLoad=function(){var t=this;n(t.element).each(function(){var i,r;!/\#/i.test(n(this).attr("href"))||(i=n('.tripNavTarget[name="'+n(this).attr("href").replace("#","")+'"]'),i.length>0&&(r=new Waypoint({element:i.get(0),offset:n(".stickyNav").height()+30,handler:function(n){t.handleWaypoint.apply(this,[n])}})))})};t.prototype.onClick=function(t){var i,r;return n("html,body").stop(!0,!0),location.pathname.replace(/^\//,"")==t.pathname.replace(/^\//,"")&&location.hostname==t.hostname&&(i=n(t.hash),i=i.length?i:n("[name="+t.hash.slice(1)+"]"),r=i.offset().top,n(t).is(".smoothScrollLink")&&(n(".tripNav").length>0?r-=n(".tripNav").outerHeight():n(".stickyHeader").length>0&&(r-=n(".stickyHeader").outerHeight())),i.length)?(n("html,body").animate({scrollTop:r},1e3),!1):void 0};n.fn[i]=function(r){return this.each(function(){n.data(this,"plugin_"+i)||n.data(this,"plugin_"+i,new t(this,r))})}}(jQuery,window,document),function(){var n,t;if($(".tripHero").length>0&&$(".tripHero").attr({"data-when":"exit","data-from":"0","data-to":"0.5","data-opacity":"0.5","data-easing":"linear"}).addClass("scrollme animateme"),scrollme.init(),n=$("#review-trip-search"),n.length){t={data:reviewsAutocompleteCache,getValue:function(n){return n.searchTerm+","+n.code},list:{match:{enabled:!0},sort:{enabled:!0},onLoadEvent:function(){$("#eac-container-review-trip-search ul li").each(function(){var n=$(this).find(".eac-item").text().split(",");n[1]="<span>"+n[1]+"<\/span>";$(this).find(".eac-item").html(n)})},onClickEvent:function(){var i=$("#review-trip-search").val().split(","),t;$("#review-trip-search").val(i[0]);t=n.getSelectedItemData().code;window.location.href=window.location.href.split(/[?#]/)[0]+"?catalogueProductCode="+t},onKeyEnterEvent:function(){var i=$("#review-trip-search").val().split(","),t;$("#review-trip-search").val(i[0]);t=n.getSelectedItemData().code;window.location.href=window.location.href.split(/[?#]/)[0]+"?catalogueProductCode="+t},onSelectItemEvent:function(){var n=$("#review-trip-search").val().split(",");$("#review-trip-search").val(n[0])},onShowListEvent:function(){$(".reviewsHeroBanner__form").addClass("autocomplete--open")},onHideListEvent:function(){$(".reviewsHeroBanner__form").removeClass("autocomplete--open")}}};n.easyAutocomplete(t);$("#review-trip-search--close").click(function(){$(this).parent("#reviewsHeroBanner__form").removeClass("autocomplete--open");n.val("")});$("#autocomplete-reviews-form button").click(function(n){n.preventDefault();i()});function i(){if(n.val().length<1)return!1;var t=n.val();$(reviewsAutocompleteCache).each(function(i){if(reviewsAutocompleteCache[i].code.indexOf(t.toUpperCase())>-1||reviewsAutocompleteCache[i].searchTerm.indexOf(t)>-1)return $("#autocomplete-reviews-form").attr("action",window.location.href.split(/[?#]/)[0]+"?catalogueProductCode="+n.val()),$("#autocomplete-reviews-form").submit(),!1})}}isPageEditor()||$(".cardBanner__contentInner").dotdotdot({watch:"window"});$(".itineraryFallback__mapContainer").length>0&&$(".itineraryFallback__mapContainer").stick_in_parent({offset_top:165,recalc_every:1});$(".popularPropsMobileSlider").length>0&&!isPageEditor()&&$(".popularPropsMobileSlider").gridMobileSlider({targerContainer:".mobilePopularProps",itemSelector:".popularPropsSlide",currentSlideClass:"-current",nextBtn:".popularPropsMobileSliderNext",prevBtn:".popularPropsMobileSliderPrev"});$(".bestDealsMobileSlider").length>0&&!isPageEditor()&&$(".bestDealsMobileSlider").gridMobileSlider({targerContainer:".mobileBestDeals",itemSelector:".bestDealsSlide",currentSlideClass:"-current",nextBtn:".bestDealsMobileSliderNext",prevBtn:".bestDealsMobileSliderPrev"});$(".smoothScrollLink").smoothScroll();$(window).on("resize.landingpagefixedsections",function(){$(".scrollingSection__chaser").length>0&&($(window).width()>1023?$(".scrollingSection__chaser").stick_in_parent({recalc_every:1,offset_top:90}):$(".scrollingSection__chaser").trigger("sticky_kit:detach"))});$(window).trigger("resize.landingpagefixedsections")}()